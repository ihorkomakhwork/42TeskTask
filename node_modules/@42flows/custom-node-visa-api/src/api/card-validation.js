const { instanceVisaAPI, getXPayToken } = require('../utils');
const { methods, routers, routersForToken } = require('../enum');

async function cardValidation({ body }) {
  const xPayToken = getXPayToken({
    body,
    resourcePath: routersForToken.CARD_VALIDATION,
  });

  const response = await instanceVisaAPI.request({
    method: methods.post,
    url: routers.CARD_VALIDATION,
    data: body,
    headers: {
      'x-pay-token': xPayToken,
    },
  });

  return response;
}

module.exports = { cardValidation };
