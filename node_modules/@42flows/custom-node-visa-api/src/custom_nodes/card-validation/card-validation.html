<script type="text/javascript">
  RED.nodes.registerType('Card validation', {
    category: 'Payment Account Validation',
    defaults: {
      name: { value: '' },
      country: {
        value: '',
        validate: RED.validators.typedInput('countryType'),
      },
      countryType: { value: '' },
      zipCode: {
        value: '',
        validate: RED.validators.typedInput('zipCodeType'),
      },
      zipCodeType: { value: '' },
      city: {
        value: '',
        validate: RED.validators.typedInput('cityType'),
      },
      cityType: { value: '' },
      state: {
        value: '',
        validate: RED.validators.typedInput('stateType'),
      },
      stateType: { value: '' },
      idCode: {
        value: '',
        validate: RED.validators.typedInput('idCodeType'),
      },
      idCodeType: { value: '' },
      cardAcceptorName: {
        value: '',
        validate: RED.validators.typedInput('cardAcceptorNameType'),
      },
      cardAcceptorNameType: { value: '' },
      terminalId: {
        value: '',
        validate: RED.validators.typedInput('terminalIdType'),
      },
      terminalIdType: { value: '' },
      primaryAccountNumber: {
        value: '',
        validate: RED.validators.typedInput('primaryAccountNumberType'),
      },
      primaryAccountNumberType: { value: '' },
      postalCode: {
        value: '',
        validate: RED.validators.typedInput('postalCodeType'),
      },
      postalCodeType: { value: '' },
    },
    inputs: 1,
    outputs: 3,
    icon: 'visa.svg',
    color: '#2066B1',
    label: function () {
      return this.name || 'Card Validation';
    },
    outputLabels: ['Successful response', 'Server and other errors'],
    oneditprepare: function () {
      $('#node-input-country').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-countryType'),
      });

      $('#node-input-zipCode').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-zipCodeType'),
      });

      $('#node-input-city').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-cityType'),
      });

      $('#node-input-state').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-stateType'),
      });

      $('#node-input-idCode').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-idCodeType'),
      });

      $('#node-input-cardAcceptorName').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-cardAcceptorNameType'),
      });

      $('#node-input-terminalId').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-terminalIdType'),
      });

      $('#node-input-primaryAccountNumber').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-primaryAccountNumberType'),
      });

      $('#node-input-postalCode').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-postalCodeType'),
      });
    },
  });
</script>

<style>
  .inputs-design {
  display: flex;
      align-items: center;
      justify-content: flex-start;
      width: 650px;
  }
  </style>

<script type="text/html" data-help-name="Card validation">
    <p>Perform validation of the payment account.</p>
    <div>
        <h3>Details</h3>
        <dl class="message-properties">
            <p>
                You can find more info <a
                    href="https://developer.visa.com/capabilities/pav/reference#tag/Payment-Account-Validation-API/operation/Card%20Validation_v1%20-%20Latest">here</a>
            </p>
        </dl>
    </div>
    <div>
        <h3>Inputs</h3>
        <dl class="message-properties">
            <p>
                On input, this node accepts the body fields of the future request.
                All the information about payload you can find <a
                    href="https://developer.visa.com/capabilities/pav/reference#tag/Payment-Account-Validation-API/operation/Card%20Validation_v1%20-%20Latest">here.</a>
                You don't need to worry about apiKey or other credentials.
                Node gets them from environment variables.
            </p>
        </dl>
    </div>
    <div>
        <h3>Outputs</h3>
        <dl class="message-properties">
            <p> This node has three outputs. First, use a good response. You can get the results in
                <code>msg.payload</code>.
                Second output for error handling. It throws an error in the next field, <code>msg.error</code>.
                Both outputs send response status in the status field.
            </p>
        </dl>
    </div>
</script>

<script type="text/html" data-template-name="Card validation">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="name" />
    </div>

    <div class="form-row inputs-design">
      <label for="node-cardAcceptor"><strong>Card Acceptor Options</strong></label><br/>
    </div>

    <div class="form-row inputs-design">
      <label for="node-input-cardAcceptorName"><i class="fa fa-credit-card-alt"></i> Name</label>
      <input type="text" id="node-input-cardAcceptorName" />
      <input type="hidden" id="node-input-cardAcceptorNameType" />
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-country"><i class="fa fa-credit-card-alt"></i> Country</label>
        <input type="text" id="node-input-country" />
        <input type="hidden" id="node-input-countryType" />
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-zipCode"><i class="fa fa-credit-card-alt"></i> Zip Code</label>
        <input type="text" id="node-input-zipCode" />
        <input type="hidden" id="node-input-zipCodeType" />
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-city"><i class="fa fa-credit-card-alt"></i> City</label>
        <input type="text" id="node-input-city" />
        <input type="hidden" id="node-input-cityType" />
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-state"><i class="fa fa-credit-card-alt"></i> State</label>
        <input type="text" id="node-input-state" />
        <input type="hidden" id="node-input-stateType" />
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-idCode"><i class="fa fa-credit-card-alt"></i> ID Code</label>
        <input type="text" id="node-input-idCode" />
        <input type="hidden" id="node-input-idCodeType" />
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-terminalId"><i class="fa fa-credit-card-alt"></i> Terminal ID</label>
        <input type="text" id="node-input-terminalId" />
        <input type="hidden" id="node-input-terminalIdType" />
    </div>

    <div class="form-row inputs-design">
      <label for="person-info"><strong>User Options</strong></label><br/>
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-primaryAccountNumber"><i class="fa fa-address-card"></i> Account</label>
        <input type="text" id="node-input-primaryAccountNumber" />
        <input type="hidden" id="node-input-primaryAccountNumberType" />
    </div>

    <div class="form-row inputs-design">
      <label for="person-info"><strong>Extra Options</strong></label><br/>
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-primaryAccountNumber"><i class="fa fa-tag"></i> Postal code</label>
        <input type="text" id="node-input-postalCode" />
        <input type="hidden" id="node-input-postalCodeType" />
    </div>

</script>
