<script type="text/javascript">
  RED.nodes.registerType('Reverse funds transactions', {
    category: 'Visa Direct',
    defaults: {
      name: { value: '' },
      amount: { value: '' },
      amountType: { value: '' },
      localTransactionDateTime: { value: '' },
      localTransactionDateTimeType: { value: '' },
      country: { value: '' },
      countryType: { value: '' },
      zipCode: { value: '' },
      zipCodeType: { value: '' },
      state: { value: '' },
      stateType: { value: '' },
      idCode: { value: '' },
      idCodeType: { value: '' },
      nameCardAcceptor: { value: '' },
      nameCardAcceptorType: { value: '' },
      terminalId: { value: '' },
      terminalIdType: { value: '' },
      transactionIdentifier: { value: '' },
      transactionIdentifierType: { value: '' },
      acquirerCountryCode: { value: '' },
      acquirerCountryCodeType: { value: '' },
      acquiringBin: { value: '' },
      acquiringBinType: { value: '' },
      senderCurrencyCode: { value: '' },
      senderCurrencyCodeType: { value: '' },
      retrievalReferenceNumber: { value: '' },
      retrievalReferenceNumberType: { value: '' },
      systemsTraceAuditNumber: { value: '' },
      systemsTraceAuditNumberType: { value: '' },
      businessApplicationId: { value: '' },
      businessApplicationIdType: { value: '' },
      senderPrimaryAccountNumber: { value: '' },
      senderPrimaryAccountNumberType: { value: '' },
      transmissionDateTime: { value: '' },
      transmissionDateTimeType: { value: '' },
      originalTraceAuditNumber: { value: '' },
      originalTraceAuditNumberType: { value: '' },
      approvalCode: { value: '' },
      approvalCodeType: { value: '' },
      originalAcquiringBin: { value: '' },
      originalAcquiringBinType: { value: '' },
    },
    inputs: 1,
    outputs: 3,
    icon: 'visa.svg',
    color: '#2066B1',
    label: function () {
      return this.name || 'Reverse Funds Transactions';
    },
    outputLabels: ['Successful response', 'Server and other errors'],
    oneditprepare: function () {
      $('#node-input-amount').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-amountType'),
      });
      $('#node-input-localTransactionDateTime').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-localTransactionDateTimeType'),
      });
      $('#node-input-country').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-countryType'),
      });
      $('#node-input-zipCode').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-zipCodeType'),
      });
      $('#node-input-state').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-stateType'),
      });
      $('#node-input-idCode').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-idCodeType'),
      });
      $('#node-input-nameCardAcceptor').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-nameCardAcceptorType'),
      });
      $('#node-input-terminalId').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-terminalIdType'),
      });
      $('#node-input-transactionIdentifier').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-transactionIdentifierType'),
      });
      $('#node-input-acquirerCountryCode').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-acquirerCountryCodeType'),
      });
      $('#node-input-acquiringBin').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-acquiringBinType'),
      });
      $('#node-input-senderCurrencyCode').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-senderCurrencyCodeType'),
      });
      $('#node-input-retrievalReferenceNumber').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-retrievalReferenceNumberType'),
      });
      $('#node-input-systemsTraceAuditNumber').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-systemsTraceAuditNumberType'),
      });
      $('#node-input-businessApplicationId').typedInput(
        {
        types: [
        {
            value: "businessApplicationId",
            options: [
            { value: "PP", label: "PP - Personal payment"},
                { value: "MP", label: "MP - Merchant Payment"},
                { value: "CI", label: "CI - Cash In"},
                { value: "CO", label: "CO - Cash Out"}
            ]
        }
    ]
      }
      );
      $('#node-input-senderPrimaryAccountNumber').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-senderPrimaryAccountNumberType'),
      });
      $('#node-input-transmissionDateTime').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-transmissionDateTimeType'),
      });
      $('#node-input-originalTraceAuditNumber').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-originalTraceAuditNumberType'),
      });
      $('#node-input-approvalCode').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-approvalCodeType'),
      });
      $('#node-input-originalAcquiringBin').typedInput({
        default: 'msg',
        types: ['msg', 'flow', 'global', 'str', 'num'],
        typeField: $('#node-input-originalAcquiringBinType'),
      });
    }
  })
</script>

<script type="text/html" data-help-name="Reverse funds transactions">
    <p>This node provides recipient's primary account and related data associated with the input Alias. The data
        returned in API response is in application/json format.
    </p>
    <div>
        <h3>Details</h3>
        <dl class="message-properties">
            <p>
                You can find more info <a
                    href="https://developer.visa.com/capabilities/visa_direct/reference#tag/Funds-Transfer-API/operation/Create%20Reverse%20Funds%20Transaction_v1%20-%20Latest">here</a>
            </p>
        </dl>
    </div>
    <div>
        <h3>Inputs</h3>
        <dl class="message-properties">
            <p>
                On input, this node accepts the body fields of the future request.
                All the information about payload you can find <a
                    href="https://developer.visa.com/capabilities/visa_direct/reference#tag/Funds-Transfer-API/operation/Create%20Reverse%20Funds%20Transaction_v1%20-%20Latest">here.</a>
                You don't need to worry about apiKey or other credentials.
                Node gets them from environment variables.
            </p>
        </dl>
    </div>
    <div>
        <h3>Outputs</h3>
        <dl class="message-properties">
            <p> This node has three outputs. First, use a good response. You can get the results in
                <code>msg.payload</code>.
                Second output for error handling. It throws an error in the next field, <code>msg.error</code>.
                Both outputs send response status in the status field.
            </p>
        </dl>
    </div>
</script>

<style>
  .inputs-design {
  display: flex;
      align-items: center;
      justify-content: flex-start;
      width: 650px;
  }
  </style>

<script type="text/html" data-template-name="Reverse funds transactions">
    <div class="form-row inputs-design">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-row inputs-design"></div>
    <label for="person-info"><strong>Transaction Options</strong></label><br/>
  </div>

      <div class="form-row inputs-design">
        <label for="node-input-transactionIdentifier"><i class="fa fa-retweet"></i> Transaction Identifier</label>
        <input type="text" id="node-input-transactionIdentifier" placeholder="Transaction Identifier">
        <input type="hidden" id="node-input-transactionIdentifierType">
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-amount"><i class="fa fa-retweet"></i> Amount</label>
        <input type="text" id="node-input-amount" placeholder="Amount">
        <input type="hidden" id="node-input-amountType">
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-localTransactionDateTime"><i class="fa fa-retweet"></i> Transaction DateTime</label>
        <input type="text" id="node-input-localTransactionDateTime" placeholder="Transaction DateTime">
        <input type="hidden" id="node-input-localTransactionDateTimeType">
    </div>

  <div class="form-row inputs-design">
    <label for="node-input-senderCurrencyCode"><i class="fa fa-retweet"></i> Sender Currency Code</label>
    <input type="text" id="node-input-senderCurrencyCode" placeholder="Sender Currency Code">
    <input type="hidden" id="node-input-senderCurrencyCodeType">
</div>

<div class="form-row inputs-design">
  <label for="node-input-senderPrimaryAccountNumber"><i class="fa fa-retweet"></i> Sender Account Number</label>
  <input type="text" id="node-input-senderPrimaryAccountNumber" placeholder="Sender Account Number">
  <input type="hidden" id="node-input-senderPrimaryAccountNumberType">
</div>

    <div class="form-row inputs-design">
      <label for="person-info"><strong>Acceptor Card Options</strong></label><br/>
    </div>

    <div class="form-row inputs-design">
      <label for="node-input-nameCardAcceptor"><i class="fa fa-credit-card-alt"></i> Acceptor Name</label>
      <input type="text" id="node-input-nameCardAcceptor" placeholder="Acceptor Name">
      <input type="hidden" id="node-input-nameCardAcceptorType">
  </div>

    <div class="form-row inputs-design">
        <label for="node-input-country"><i class="fa fa-credit-card-alt"></i> Country</label>
        <input type="text" id="node-input-country" placeholder="Country">
        <input type="hidden" id="node-input-countryType">
    </div>
    <div class="form-row inputs-design">
        <label for="node-input-zipCode"><i class="fa fa-credit-card-alt"></i> Zip code</label>
        <input type="text" id="node-input-zipCode" placeholder="Zip code">
        <input type="hidden" id="node-input-zipCodeType">
    </div>
    <div class="form-row inputs-design">
        <label for="node-input-state"><i class="fa fa-credit-card-alt"></i> State</label>
        <input type="text" id="node-input-state" placeholder="State">
        <input type="hidden" id="node-input-stateType">
    </div>
    <div class="form-row inputs-design">
        <label for="node-input-idCode"><i class="fa fa-credit-card-alt"></i> Id code</label>
        <input type="text" id="node-input-idCode" placeholder="Id code">
        <input type="hidden" id="node-input-idCodeType">
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-terminalId"><i class="fa fa-credit-card-alt"></i> Terminal ID</label>
        <input type="text" id="node-input-terminalId" placeholder="Terminal ID">
        <input type="hidden" id="node-input-terminalIdType">
    </div>


    <div class="form-row inputs-design">
      <label for="person-info"><strong>Reverse Transaction Options</strong></label><br/>
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-transmissionDateTime"><i class="fa fa-reply"></i> Transmission DateTime</label>
        <input type="text" id="node-input-transmissionDateTime" placeholder="Transmission DateTime">
        <input type="hidden" id="node-input-transmissionDateTimeType">
    </div>
    <div class="form-row inputs-design">
        <label for="node-input-originalTraceAuditNumber"><i class="fa fa-reply"></i> Original Trace Audit Number</label>
        <input type="text" id="node-input-originalTraceAuditNumber" placeholder="Original Trace Audit Number">
        <input type="hidden" id="node-input-originalTraceAuditNumberType">
    </div>
    <div class="form-row inputs-design">
        <label for="node-input-approvalCode"><i class="fa fa-reply"></i> Approval Code</label>
        <input type="text" id="node-input-approvalCode" placeholder="Approval Code">
        <input type="hidden" id="node-input-approvalCodeType">
    </div>
    <div class="form-row inputs-design">
        <label for="node-input-originalAcquiringBin"><i class="fa fa-reply"></i> Original Acquiring BIN</label>
        <input type="text" id="node-input-originalAcquiringBin" placeholder="Original Acquiring BIN">
        <input type="hidden" id="node-input-originalAcquiringBinType">
    </div>

    <div class="form-row inputs-design">
      <label for="person-info"><strong>Acquiring Options</strong></label><br/>
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-acquirerCountryCode"><i class="fa fa-square"></i> Acquirer Country Code</label>
        <input type="text" id="node-input-acquirerCountryCode" placeholder="Acquirer Country Code">
        <input type="hidden" id="node-input-acquirerCountryCodeType">
    </div>
    <div class="form-row inputs-design">
        <label for="node-input-acquiringBin"><i class="fa fa-square"></i> Acquiring BIN</label>
        <input type="text" id="node-input-acquiringBin" placeholder="Acquiring BIN">
        <input type="hidden" id="node-input-acquiringBinType">
    </div>

    <div class="form-row inputs-design">
      <label for="person-info"><strong>Extra Options</strong></label><br/>
    </div>

    <div class="form-row inputs-design">
        <label for="node-input-retrievalReferenceNumber"><i class="fa fa-tag"></i> Retrieval Reference Number</label>
        <input type="text" id="node-input-retrievalReferenceNumber" placeholder="Retrieval Reference Number">
        <input type="hidden" id="node-input-retrievalReferenceNumberType">
    </div>
    <div class="form-row inputs-design">
        <label for="node-input-systemsTraceAuditNumber"><i class="fa fa-tag"></i> Systems Trace Audit Number</label>
        <input type="text" id="node-input-systemsTraceAuditNumber" placeholder="Systems Trace Audit Number">
        <input type="hidden" id="node-input-systemsTraceAuditNumberType">
    </div>
    <div class="form-row inputs-design">
        <label for="node-input-businessApplicationId"><i class="fa fa-tag"></i> Business Application Id</label>
        <input type="text" id="node-input-businessApplicationId" placeholder="Business Application Id">
        <input type="hidden" id="node-input-businessApplicationIdType">
    </div>

</script>