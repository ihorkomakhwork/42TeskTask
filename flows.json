[
    {
        "id": "412669072e03744e",
        "type": "tab",
        "label": "Flow 1",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1c8cb1edd05e1ccb",
        "type": "subflow",
        "name": "Subflow 1",
        "info": "",
        "in": [
            {
                "x": 40,
                "y": 160,
                "wires": [
                    {
                        "id": "079fe9eab5dbce95"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 800,
                "y": 20,
                "wires": []
            },
            {
                "x": 800,
                "y": 160,
                "wires": []
            }
        ]
    },
    {
        "id": "0efdf64f7eaaebed",
        "type": "tls-config",
        "name": "",
        "cert": "",
        "key": "",
        "ca": "",
        "certname": "cert.pem",
        "keyname": "key_ca90416a-50ec-47f3-9a5d-f6f8e2b2d22c.pem",
        "caname": "",
        "servername": "",
        "verifyservercert": false,
        "alpnprotocol": ""
    },
    {
        "id": "84e59769f7f05b82",
        "type": "tls-config",
        "name": "visa_api",
        "cert": "",
        "key": "",
        "ca": "",
        "certname": "cert.pem",
        "keyname": "privateKey.pem",
        "caname": "",
        "servername": "",
        "verifyservercert": true,
        "alpnprotocol": ""
    },
    {
        "id": "c5ed5af6e10fedbd",
        "type": "http request",
        "z": "1c8cb1edd05e1ccb",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://sandbox.api.visa.com/{{resource}}",
        "tls": "84e59769f7f05b82",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "basic",
        "senderr": false,
        "headers": [],
        "x": 450,
        "y": 160,
        "wires": [
            [
                "343dec3e360d3a6a"
            ]
        ]
    },
    {
        "id": "079fe9eab5dbce95",
        "type": "change",
        "z": "1c8cb1edd05e1ccb",
        "name": "set default",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.postBody",
                "tot": "msg",
                "dc": true
            },
            {
                "t": "set",
                "p": "resource",
                "pt": "msg",
                "to": "payload.resource",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "headers['Content-Type']",
                "pt": "msg",
                "to": "application/json",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "headers['Accept']",
                "pt": "msg",
                "to": "application/json",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 230,
        "y": 160,
        "wires": [
            [
                "c5ed5af6e10fedbd"
            ]
        ],
        "inputLabels": [
            "ваымаымммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммммм"
        ]
    },
    {
        "id": "343dec3e360d3a6a",
        "type": "debug",
        "z": "1c8cb1edd05e1ccb",
        "name": "debug 8",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 660,
        "y": 180,
        "wires": []
    },
    {
        "id": "83828904382c2df7",
        "type": "inject",
        "z": "412669072e03744e",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"country\":\"KE\",\"recipientLastName\":\"Bakari\",\"recipientMiddleName\":\"M\",\"city\":\"Nairobi\",\"address2\":\"Region 1\",\"recipientFirstName\":\"Jamie\",\"recipientPrimaryAccountNumber\":\"4895140000066666\",\"address1\":\"Street 1\",\"issuerName\":\"Test Bank 1\",\"postalCode\":\"00111\",\"cardType\":\"Visa Classic\",\"consentDateTime\":\"2018-03-01 01:02:03\",\"aliasType\":\"01\",\"guid\":\"574f4b6a4c2b70472f306f300099515a789092348832455975343637a4d3170\",\"alias\":\"254711333888\"}",
        "payloadType": "json",
        "x": 130,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "38a0a94e5c4c3912",
        "type": "debug",
        "z": "412669072e03744e",
        "name": "debug 7",
        "active": true,
        "tosidebar": true,
        "console": true,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 970,
        "y": 220,
        "wires": []
    },
    {
        "id": "8d50ad368c5974dd",
        "type": "change",
        "z": "412669072e03744e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "dda7d6fbd87c59dc",
        "type": "function",
        "z": "412669072e03744e",
        "name": "function 1",
        "func": "msg.payload = {\n    \"systemsTraceAuditNumber\": \"743720\",\n    \"cardCvv2Value\": \"022\",\n    \"cardAcceptor\": {\n        \"address\": {},\n        \"idCode\": \"111111\",\n        \"name\": \"ABC Corp\",\n        \"terminalId\": \"12345678\"\n    },\n    \"primaryAccountNumber\": \"4957030420210462\",\n    \"retrievalReferenceNumber\": \"015221743720\",\n    \"cardExpiryDate\": \"2040-10\",\n    \"addressVerificationResults\": {\n        \"street\": \"801 Metro Center Blv\",\n        \"postalCode\": \"94404\"\n    }\n};\n\n\nreturn msg; ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 220,
        "wires": [
            [
                "984387afbaa32a6e"
            ]
        ]
    },
    {
        "id": "ab3e3cd8d1bb97e7",
        "type": "switch",
        "z": "412669072e03744e",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "f2b4205ab99d3f46",
        "type": "comment",
        "z": "412669072e03744e",
        "name": "",
        "info": "",
        "x": 220,
        "y": 540,
        "wires": []
    },
    {
        "id": "984387afbaa32a6e",
        "type": "subflow:1c8cb1edd05e1ccb",
        "z": "412669072e03744e",
        "name": "visa api",
        "x": 630,
        "y": 220,
        "wires": [
            [],
            []
        ],
        "icon": "font-awesome/fa-bank"
    },
    {
        "id": "41747a17.54ffd4",
        "type": "http request",
        "z": "412669072e03744e",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://jsonplaceholder.typicode.com/posts/{{post}}",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 410,
        "y": 680,
        "wires": [
            [
                "d682318c.36823"
            ]
        ]
    },
    {
        "id": "d682318c.36823",
        "type": "debug",
        "z": "412669072e03744e",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "payload",
        "x": 570,
        "y": 680,
        "wires": []
    },
    {
        "id": "90bfea22.dd2b98",
        "type": "inject",
        "z": "412669072e03744e",
        "name": "post id",
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "2",
        "payloadType": "str",
        "x": 110,
        "y": 680,
        "wires": [
            [
                "e67a0cc.596d4f"
            ]
        ]
    },
    {
        "id": "e67a0cc.596d4f",
        "type": "change",
        "z": "412669072e03744e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "post",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 250,
        "y": 680,
        "wires": [
            [
                "41747a17.54ffd4"
            ]
        ]
    },
    {
        "id": "cb1dfcde.fd153",
        "type": "function",
        "z": "412669072e03744e",
        "name": "set payload and headers",
        "func": "msg.payload = \"data to post\";\nmsg.headers = {};\nmsg.headers['X-Auth-User'] = 'mike';\nmsg.headers['X-Auth-Key'] = 'fred-key';\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 560,
        "wires": [
            [
                "e44209e7.752698"
            ]
        ]
    },
    {
        "id": "dcf34aab.218928",
        "type": "inject",
        "z": "412669072e03744e",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 460,
        "y": 560,
        "wires": [
            [
                "cb1dfcde.fd153"
            ]
        ]
    },
    {
        "id": "e44209e7.752698",
        "type": "http request",
        "z": "412669072e03744e",
        "name": "post to HttpBin",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "https://httpbin.org/post",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 860,
        "y": 560,
        "wires": [
            [
                "ee306582.f0dde8"
            ]
        ]
    },
    {
        "id": "ee306582.f0dde8",
        "type": "debug",
        "z": "412669072e03744e",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 1030,
        "y": 560,
        "wires": []
    },
    {
        "id": "e26d55d756ecb5dc",
        "type": "function",
        "z": "412669072e03744e",
        "name": "function 2",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 220,
        "wires": [
            []
        ]
    }
]